{"ast":null,"code":"var _jsxFileName = \"/Users/lanceway/Downloads/ALF-update-main/src/shared/NcImage/NcImage.tsx\",\n    _s = $RefreshSig$();\n\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { memo, useEffect, useRef, useState } from 'react';\nimport checkInViewIntersectionObserver from '../../utils/isInViewPortIntersectionObserver';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst placeholderLargeH = `https://i.ibb.co/qjMN1st/placeholder-large-h.png`;\nconst placeholderLarge = `https://i.ibb.co/cYhy7tG/placeholder-large.png`;\n\nconst NcImage = _ref => {\n  _s();\n\n  let {\n    containerClassName = '',\n    alt = 'nc-imgs',\n    src = '',\n    prevImageHorizontal = false,\n    className = 'object-cover w-full h-full',\n    ...args\n  } = _ref;\n  let isMounted = false;\n\n  const _containerRef = useRef(null);\n\n  let _imageEl = null;\n  const placeholderImage = prevImageHorizontal ? placeholderLargeH : placeholderLarge;\n  const [__src, set__src] = useState(placeholderImage);\n\n  const _initActions = async () => {\n    set__src(placeholderImage);\n\n    _checkInViewPort();\n  };\n\n  const _checkInViewPort = () => {\n    if (!_containerRef.current) return;\n    checkInViewIntersectionObserver({\n      target: _containerRef.current,\n      distanceFromEnd: 0,\n      callback: _imageOnViewPort\n    });\n  };\n\n  const _imageOnViewPort = () => {\n    if (!src) {\n      _handleImageLoaded();\n\n      return true;\n    }\n\n    _imageEl = new Image();\n\n    if (_imageEl) {\n      _imageEl.src = src;\n\n      _imageEl.addEventListener('load', _handleImageLoaded);\n    }\n\n    return true;\n  };\n\n  const _handleImageLoaded = () => {\n    if (!isMounted) return; // setImageLoaded(true);\n\n    set__src(src);\n  };\n\n  useEffect(() => {\n    isMounted = true;\n\n    _initActions();\n\n    return () => {\n      isMounted = false;\n    };\n  }, [src]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `nc-NcImage ${containerClassName}`,\n    \"data-nc-id\": \"NcImage\",\n    ref: _containerRef,\n    children: __src ? /*#__PURE__*/_jsxDEV(\"img\", {\n      src: __src,\n      className: className,\n      alt: alt,\n      ...args\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${className} bg-neutral-200 dark:bg-neutral-6000`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n\n_s(NcImage, \"xcl92ck82/uDp8IyuWK2qsxBQgA=\");\n\n_c = NcImage;\nexport default _c2 = /*#__PURE__*/memo(NcImage);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"NcImage\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","memo","useEffect","useRef","useState","checkInViewIntersectionObserver","placeholderLargeH","placeholderLarge","NcImage","containerClassName","alt","src","prevImageHorizontal","className","args","isMounted","_containerRef","_imageEl","placeholderImage","__src","set__src","_initActions","_checkInViewPort","current","target","distanceFromEnd","callback","_imageOnViewPort","_handleImageLoaded","Image","addEventListener"],"sources":["/Users/lanceway/Downloads/ALF-update-main/src/shared/NcImage/NcImage.tsx"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport React, {\n  FC,\n  ImgHTMLAttributes,\n  memo,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport checkInViewIntersectionObserver from '../../utils/isInViewPortIntersectionObserver';\n\nconst placeholderLargeH = `https://i.ibb.co/qjMN1st/placeholder-large-h.png`;\nconst placeholderLarge = `https://i.ibb.co/cYhy7tG/placeholder-large.png`;\n\nexport interface NcImageProps extends ImgHTMLAttributes<HTMLImageElement> {\n  containerClassName?: string;\n  prevImageHorizontal?: boolean;\n}\n\nconst NcImage: FC<NcImageProps> = ({\n  containerClassName = '',\n  alt = 'nc-imgs',\n  src = '',\n  prevImageHorizontal = false,\n  className = 'object-cover w-full h-full',\n  ...args\n}) => {\n  let isMounted = false;\n  const _containerRef = useRef(null);\n  let _imageEl: HTMLImageElement | null = null;\n  const placeholderImage = prevImageHorizontal\n    ? placeholderLargeH\n    : placeholderLarge;\n\n  const [__src, set__src] = useState(placeholderImage);\n\n  const _initActions = async () => {\n    set__src(placeholderImage);\n    _checkInViewPort();\n  };\n\n  const _checkInViewPort = () => {\n    if (!_containerRef.current) return;\n    checkInViewIntersectionObserver({\n      target: _containerRef.current as any,\n      distanceFromEnd: 0,\n      callback: _imageOnViewPort,\n    });\n  };\n\n  const _imageOnViewPort = () => {\n    if (!src) {\n      _handleImageLoaded();\n      return true;\n    }\n    _imageEl = new Image();\n    if (_imageEl) {\n      _imageEl.src = src;\n      _imageEl.addEventListener('load', _handleImageLoaded);\n    }\n    return true;\n  };\n\n  const _handleImageLoaded = () => {\n    if (!isMounted) return;\n    // setImageLoaded(true);\n    set__src(src);\n  };\n\n  useEffect(() => {\n    isMounted = true;\n    _initActions();\n    return () => {\n      isMounted = false;\n    };\n  }, [src]);\n\n  return (\n    <div\n      className={`nc-NcImage ${containerClassName}`}\n      data-nc-id=\"NcImage\"\n      ref={_containerRef}\n    >\n      {__src ? (\n        <img src={__src} className={className} alt={alt} {...args} />\n      ) : (\n        <div\n          className={`${className} bg-neutral-200 dark:bg-neutral-6000`}\n        ></div>\n      )}\n    </div>\n  );\n};\n\nexport default memo(NcImage);\n"],"mappings":";;;AAAA;AACA,OAAOA,KAAP,IAGEC,IAHF,EAIEC,SAJF,EAKEC,MALF,EAMEC,QANF,QAOO,OAPP;AAQA,OAAOC,+BAAP,MAA4C,8CAA5C;;AAEA,MAAMC,iBAAiB,GAAI,kDAA3B;AACA,MAAMC,gBAAgB,GAAI,gDAA1B;;AAOA,MAAMC,OAAyB,GAAG,QAO5B;EAAA;;EAAA,IAP6B;IACjCC,kBAAkB,GAAG,EADY;IAEjCC,GAAG,GAAG,SAF2B;IAGjCC,GAAG,GAAG,EAH2B;IAIjCC,mBAAmB,GAAG,KAJW;IAKjCC,SAAS,GAAG,4BALqB;IAMjC,GAAGC;EAN8B,CAO7B;EACJ,IAAIC,SAAS,GAAG,KAAhB;;EACA,MAAMC,aAAa,GAAGb,MAAM,CAAC,IAAD,CAA5B;;EACA,IAAIc,QAAiC,GAAG,IAAxC;EACA,MAAMC,gBAAgB,GAAGN,mBAAmB,GACxCN,iBADwC,GAExCC,gBAFJ;EAIA,MAAM,CAACY,KAAD,EAAQC,QAAR,IAAoBhB,QAAQ,CAACc,gBAAD,CAAlC;;EAEA,MAAMG,YAAY,GAAG,YAAY;IAC/BD,QAAQ,CAACF,gBAAD,CAAR;;IACAI,gBAAgB;EACjB,CAHD;;EAKA,MAAMA,gBAAgB,GAAG,MAAM;IAC7B,IAAI,CAACN,aAAa,CAACO,OAAnB,EAA4B;IAC5BlB,+BAA+B,CAAC;MAC9BmB,MAAM,EAAER,aAAa,CAACO,OADQ;MAE9BE,eAAe,EAAE,CAFa;MAG9BC,QAAQ,EAAEC;IAHoB,CAAD,CAA/B;EAKD,CAPD;;EASA,MAAMA,gBAAgB,GAAG,MAAM;IAC7B,IAAI,CAAChB,GAAL,EAAU;MACRiB,kBAAkB;;MAClB,OAAO,IAAP;IACD;;IACDX,QAAQ,GAAG,IAAIY,KAAJ,EAAX;;IACA,IAAIZ,QAAJ,EAAc;MACZA,QAAQ,CAACN,GAAT,GAAeA,GAAf;;MACAM,QAAQ,CAACa,gBAAT,CAA0B,MAA1B,EAAkCF,kBAAlC;IACD;;IACD,OAAO,IAAP;EACD,CAXD;;EAaA,MAAMA,kBAAkB,GAAG,MAAM;IAC/B,IAAI,CAACb,SAAL,EAAgB,OADe,CAE/B;;IACAK,QAAQ,CAACT,GAAD,CAAR;EACD,CAJD;;EAMAT,SAAS,CAAC,MAAM;IACda,SAAS,GAAG,IAAZ;;IACAM,YAAY;;IACZ,OAAO,MAAM;MACXN,SAAS,GAAG,KAAZ;IACD,CAFD;EAGD,CANQ,EAMN,CAACJ,GAAD,CANM,CAAT;EAQA,oBACE;IACE,SAAS,EAAG,cAAaF,kBAAmB,EAD9C;IAEE,cAAW,SAFb;IAGE,GAAG,EAAEO,aAHP;IAAA,UAKGG,KAAK,gBACJ;MAAK,GAAG,EAAEA,KAAV;MAAiB,SAAS,EAAEN,SAA5B;MAAuC,GAAG,EAAEH,GAA5C;MAAA,GAAqDI;IAArD;MAAA;MAAA;MAAA;IAAA,QADI,gBAGJ;MACE,SAAS,EAAG,GAAED,SAAU;IAD1B;MAAA;MAAA;MAAA;IAAA;EARJ;IAAA;IAAA;IAAA;EAAA,QADF;AAeD,CAzED;;GAAML,O;;KAAAA,O;AA2EN,kCAAeP,IAAI,CAACO,OAAD,CAAnB"},"metadata":{},"sourceType":"module"}