{"ast":null,"code":"import _objectSpread from\"/Users/lanceway/Downloads/ALF-update-main/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/lanceway/Downloads/ALF-update-main/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/lanceway/Downloads/ALF-update-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/lanceway/Downloads/ALF-update-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectWithoutProperties from\"/Users/lanceway/Downloads/ALF-update-main/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";var _excluded=[\"containerClassName\",\"alt\",\"src\",\"prevImageHorizontal\",\"className\"];/* eslint-disable react-hooks/exhaustive-deps */import React,{memo,useEffect,useRef,useState}from'react';import checkInViewIntersectionObserver from'../../utils/isInViewPortIntersectionObserver';import{jsx as _jsx}from\"react/jsx-runtime\";var placeholderLargeH=\"https://i.ibb.co/qjMN1st/placeholder-large-h.png\";var placeholderLarge=\"https://i.ibb.co/cYhy7tG/placeholder-large.png\";var NcImage=function NcImage(_ref){var _ref$containerClassNa=_ref.containerClassName,containerClassName=_ref$containerClassNa===void 0?'':_ref$containerClassNa,_ref$alt=_ref.alt,alt=_ref$alt===void 0?'nc-imgs':_ref$alt,_ref$src=_ref.src,src=_ref$src===void 0?'':_ref$src,_ref$prevImageHorizon=_ref.prevImageHorizontal,prevImageHorizontal=_ref$prevImageHorizon===void 0?false:_ref$prevImageHorizon,_ref$className=_ref.className,className=_ref$className===void 0?'object-cover w-full h-full':_ref$className,args=_objectWithoutProperties(_ref,_excluded);var isMounted=false;var _containerRef=useRef(null);var _imageEl=null;var placeholderImage=prevImageHorizontal?placeholderLargeH:placeholderLarge;var _useState=useState(placeholderImage),_useState2=_slicedToArray(_useState,2),__src=_useState2[0],set__src=_useState2[1];var _initActions=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:set__src(placeholderImage);_checkInViewPort();case 2:case\"end\":return _context.stop();}}},_callee);}));return function _initActions(){return _ref2.apply(this,arguments);};}();var _checkInViewPort=function _checkInViewPort(){if(!_containerRef.current)return;checkInViewIntersectionObserver({target:_containerRef.current,distanceFromEnd:0,callback:_imageOnViewPort});};var _imageOnViewPort=function _imageOnViewPort(){if(!src){_handleImageLoaded();return true;}_imageEl=new Image();if(_imageEl){_imageEl.src=src;_imageEl.addEventListener('load',_handleImageLoaded);}return true;};var _handleImageLoaded=function _handleImageLoaded(){if(!isMounted)return;// setImageLoaded(true);\nset__src(src);};useEffect(function(){isMounted=true;_initActions();return function(){isMounted=false;};},[src]);return/*#__PURE__*/_jsx(\"div\",{className:\"nc-NcImage \".concat(containerClassName),\"data-nc-id\":\"NcImage\",ref:_containerRef,children:__src?/*#__PURE__*/_jsx(\"img\",_objectSpread({src:__src,className:className,alt:alt},args)):/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(className,\" bg-neutral-200 dark:bg-neutral-6000\")})});};export default/*#__PURE__*/memo(NcImage);","map":{"version":3,"names":["React","memo","useEffect","useRef","useState","checkInViewIntersectionObserver","placeholderLargeH","placeholderLarge","NcImage","containerClassName","alt","src","prevImageHorizontal","className","args","isMounted","_containerRef","_imageEl","placeholderImage","__src","set__src","_initActions","_checkInViewPort","current","target","distanceFromEnd","callback","_imageOnViewPort","_handleImageLoaded","Image","addEventListener"],"sources":["/Users/lanceway/Downloads/ALF-update-main/src/shared/NcImage/NcImage.tsx"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport React, {\n  FC,\n  ImgHTMLAttributes,\n  memo,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport checkInViewIntersectionObserver from '../../utils/isInViewPortIntersectionObserver';\n\nconst placeholderLargeH = `https://i.ibb.co/qjMN1st/placeholder-large-h.png`;\nconst placeholderLarge = `https://i.ibb.co/cYhy7tG/placeholder-large.png`;\n\nexport interface NcImageProps extends ImgHTMLAttributes<HTMLImageElement> {\n  containerClassName?: string;\n  prevImageHorizontal?: boolean;\n}\n\nconst NcImage: FC<NcImageProps> = ({\n  containerClassName = '',\n  alt = 'nc-imgs',\n  src = '',\n  prevImageHorizontal = false,\n  className = 'object-cover w-full h-full',\n  ...args\n}) => {\n  let isMounted = false;\n  const _containerRef = useRef(null);\n  let _imageEl: HTMLImageElement | null = null;\n  const placeholderImage = prevImageHorizontal\n    ? placeholderLargeH\n    : placeholderLarge;\n\n  const [__src, set__src] = useState(placeholderImage);\n\n  const _initActions = async () => {\n    set__src(placeholderImage);\n    _checkInViewPort();\n  };\n\n  const _checkInViewPort = () => {\n    if (!_containerRef.current) return;\n    checkInViewIntersectionObserver({\n      target: _containerRef.current as any,\n      distanceFromEnd: 0,\n      callback: _imageOnViewPort,\n    });\n  };\n\n  const _imageOnViewPort = () => {\n    if (!src) {\n      _handleImageLoaded();\n      return true;\n    }\n    _imageEl = new Image();\n    if (_imageEl) {\n      _imageEl.src = src;\n      _imageEl.addEventListener('load', _handleImageLoaded);\n    }\n    return true;\n  };\n\n  const _handleImageLoaded = () => {\n    if (!isMounted) return;\n    // setImageLoaded(true);\n    set__src(src);\n  };\n\n  useEffect(() => {\n    isMounted = true;\n    _initActions();\n    return () => {\n      isMounted = false;\n    };\n  }, [src]);\n\n  return (\n    <div\n      className={`nc-NcImage ${containerClassName}`}\n      data-nc-id=\"NcImage\"\n      ref={_containerRef}\n    >\n      {__src ? (\n        <img src={__src} className={className} alt={alt} {...args} />\n      ) : (\n        <div\n          className={`${className} bg-neutral-200 dark:bg-neutral-6000`}\n        ></div>\n      )}\n    </div>\n  );\n};\n\nexport default memo(NcImage);\n"],"mappings":"ivBAAA,gDACA,MAAOA,MAAP,EAGEC,IAHF,CAIEC,SAJF,CAKEC,MALF,CAMEC,QANF,KAOO,OAPP,CAQA,MAAOC,gCAAP,KAA4C,8CAA5C,C,2CAEA,GAAMC,kBAAiB,mDAAvB,CACA,GAAMC,iBAAgB,iDAAtB,CAOA,GAAMC,QAAyB,CAAG,QAA5BA,QAA4B,MAO5B,gCANJC,kBAMI,CANJA,kBAMI,gCANiB,EAMjB,qCALJC,GAKI,CALJA,GAKI,mBALE,SAKF,wBAJJC,GAII,CAJJA,GAII,mBAJE,EAIF,qCAHJC,mBAGI,CAHJA,mBAGI,gCAHkB,KAGlB,2CAFJC,SAEI,CAFJA,SAEI,yBAFQ,4BAER,gBADDC,IACC,0CACJ,GAAIC,UAAS,CAAG,KAAhB,CACA,GAAMC,cAAa,CAAGb,MAAM,CAAC,IAAD,CAA5B,CACA,GAAIc,SAAiC,CAAG,IAAxC,CACA,GAAMC,iBAAgB,CAAGN,mBAAmB,CACxCN,iBADwC,CAExCC,gBAFJ,CAIA,cAA0BH,QAAQ,CAACc,gBAAD,CAAlC,wCAAOC,KAAP,eAAcC,QAAd,eAEA,GAAMC,aAAY,6FAAG,qIACnBD,QAAQ,CAACF,gBAAD,CAAR,CACAI,gBAAgB,GAFG,sDAAH,kBAAZD,aAAY,2CAAlB,CAKA,GAAMC,iBAAgB,CAAG,QAAnBA,iBAAmB,EAAM,CAC7B,GAAI,CAACN,aAAa,CAACO,OAAnB,CAA4B,OAC5BlB,+BAA+B,CAAC,CAC9BmB,MAAM,CAAER,aAAa,CAACO,OADQ,CAE9BE,eAAe,CAAE,CAFa,CAG9BC,QAAQ,CAAEC,gBAHoB,CAAD,CAA/B,CAKD,CAPD,CASA,GAAMA,iBAAgB,CAAG,QAAnBA,iBAAmB,EAAM,CAC7B,GAAI,CAAChB,GAAL,CAAU,CACRiB,kBAAkB,GAClB,MAAO,KAAP,CACD,CACDX,QAAQ,CAAG,GAAIY,MAAJ,EAAX,CACA,GAAIZ,QAAJ,CAAc,CACZA,QAAQ,CAACN,GAAT,CAAeA,GAAf,CACAM,QAAQ,CAACa,gBAAT,CAA0B,MAA1B,CAAkCF,kBAAlC,EACD,CACD,MAAO,KAAP,CACD,CAXD,CAaA,GAAMA,mBAAkB,CAAG,QAArBA,mBAAqB,EAAM,CAC/B,GAAI,CAACb,SAAL,CAAgB,OAChB;AACAK,QAAQ,CAACT,GAAD,CAAR,CACD,CAJD,CAMAT,SAAS,CAAC,UAAM,CACda,SAAS,CAAG,IAAZ,CACAM,YAAY,GACZ,MAAO,WAAM,CACXN,SAAS,CAAG,KAAZ,CACD,CAFD,CAGD,CANQ,CAMN,CAACJ,GAAD,CANM,CAAT,CAQA,mBACE,YACE,SAAS,sBAAgBF,kBAAhB,CADX,CAEE,aAAW,SAFb,CAGE,GAAG,CAAEO,aAHP,UAKGG,KAAK,cACJ,0BAAK,GAAG,CAAEA,KAAV,CAAiB,SAAS,CAAEN,SAA5B,CAAuC,GAAG,CAAEH,GAA5C,EAAqDI,IAArD,EADI,cAGJ,YACE,SAAS,WAAKD,SAAL,wCADX,EARJ,EADF,CAeD,CAzED,CA2EA,2BAAeZ,IAAI,CAACO,OAAD,CAAnB"},"metadata":{},"sourceType":"module"}